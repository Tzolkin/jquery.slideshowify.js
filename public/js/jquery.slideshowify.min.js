/**
 * (The MIT License)
 *
 * Author: Aleksandar Kolundzija
 * Modified by: Francisco Zavala
 * version 0.0.1
 *
 * @requires jquery
 * @requires jquery.transit (http://ricostacruz.com/jquery.transit/) as of version 0.9
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * 'Software'), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(t){t.fn.slideshowify=function(){function e(e){var o,p,c,f=t(this),u=n.width(),l=n.height(),m=u/l,w=f.width()/f.height(),x=Math.floor(Math.max(u,l)/10),y=Math.round(Math.random()),b={};w>m?(c=s?y?{dim:"left",attr:"x",sign:"-"}:{dim:"right",attr:"x",sign:""}:y?{dim:"left",attr:"left",sign:"-"}:{dim:"right",attr:"right",sign:"-"},f.height(l+"px").width(e.w*(l/e.h)+"px"),p=f.width()-u):(c=s?y?{dim:"top",attr:"y",sign:"-"}:{dim:"bottom",attr:"y",sign:""}:y?{dim:"top",attr:"top",sign:"-"}:{dim:"bottom",attr:"bottom",sign:"-"},f.width(u+"px").height(e.h*(u/e.w)+"px"),p=f.height()-l),f.css(c.dim,"0"),b[c.attr]=c.sign+p+"px",s&&p<x&&(y?(f.css("scale","1.2"),b={scale:"1"}):b={scale:"1.2"}),o={duration:Math.min(Math.max(10*p,g.aniSpeedMin),g.aniSpeedMax),easing:h,queue:!1,complete:function(){a.trigger("beforeFadeOut",r[d]),f.fadeOut(g.fadeOutSpeed,function(){a.trigger("afterFadeOut",r[d]),f.remove()}),i()}},a.trigger("beforeFadeIn",r[d]),f.fadeIn(g.fadeInSpeed,function(){f.css("z-index",-1),a.trigger("afterFadeIn",r[d])}),s?f.transition(t.extend(b,o)):f.animate(b,o)}function i(){var i=new Image,n=new Image,a=r.length;d=d<a-1?d+1:0,t(i).on("load",function(){"into"===g.blend?(t(this).css({position:"absolute","z-index":"-2"}),t("#"+c).append(this)):t("#"+c).empty().append(this),e.call(this,r[d])}).on("error",function(){throw new Error("Oops, can't load the image.")}).hide().attr("src",r[d].src),o!==a&&(o=d+1)<a-1&&(n.src=r[o].src)}var n,a,r=[],d=-1,o=0,s=!0,h="in-out",p=document,c="slideshowify-"+(new Date).getTime(),f={position:"absolute",overflow:"hidden","z-index":"-2",left:"0",top:"0",width:"100%",height:"100%"},g={parentEl:"body",blend:"into",randomize:!1,fadeInSpeed:1500,fadeOutSpeed:1500,aniSpeedMin:9e3,aniSpeedMax:15e3};return arguments[0]&&(t.extend(g,arguments[0]),"body"!==g.parentEl&&(p=g.parentEl)),n=t(p),a=t(g.parentEl),t.support.transition||(s=!1,h="swing"),g.imgs?r=g.imgs:t(this).each(function(e,i){t(i).hide(),r.push({src:t(i).attr("src"),w:t(i).width(),h:t(i).height()})}),g.randomize&&r.sort(function(){return.5-Math.random()}),t("<div id='"+c+"'></div>").css(f).appendTo(g.parentEl),i(),this},t.slideshowify=function(e){var i={dataUrl:"",dataType:"json",async:!0,filterFn:function(t){return t}};t.extend(i,e),t.ajax({url:i.dataUrl,dataType:i.dataType,async:i.async,success:function(e){i.imgs=i.filterFn(e),t({}).slideshowify(i)}})}}(jQuery);
